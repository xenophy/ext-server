<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">/* vim: set expandtab tabstop=4 shiftwidth=4 softtabstop=4: */

/*!
 * Ext Server
 * Copyright (c)2012 Xenophy.CO.,LTD All rights Reserved.
 * MIT Licensed
 */

// {{{ Ext.Date

<span id='Ext-Date'>/**
</span> * @class Ext.Date
 *
 * {Ext_Date:doc-contents}
 *
 * @singleton
 */
module.exports = {

    // {{{ DAY

<span id='Ext-Date-property-DAY'>    /**
</span>     * {Ext_Date:property-DAY:desc}
     *
     * @type String
     */
    DAY: &quot;d&quot;,

    // }}}
    // {{{ dayNames

<span id='Ext-Date-property-dayNames'>    /**
</span>     * @property {String[]} dayNames
     *
     * {Ext_Date:property-dayNames:desc}
     */
    dayNames: [
        &quot;Sunday&quot;,
        &quot;Monday&quot;,
        &quot;Tuesday&quot;,
        &quot;Wednesday&quot;,
        &quot;Thursday&quot;,
        &quot;Friday&quot;,
        &quot;Saturday&quot;
    ],

    // }}}
    // {{{ defaultFormat

<span id='Ext-Date-property-defaultFormat'>    /**
</span>     * @property {String} defaultFormat
     *
     * {Ext_Date:property-defaultFormat:desc}
     */
    defaultFormat : &quot;m/d/Y&quot;,

    // }}}
    // {{{ defaults

<span id='Ext-Date-property-defaults'>    /**
</span>     * {Ext_Date:property-defaults:desc}
     *
     * @property defaults
     * @type Object
     */
    defaults: {},

    // }}}
    // {{{ formatCodes

<span id='Ext-Date-property-formatCodes'>    /**
</span>     * {Ext_Date:property-formatCodes:desc}
     *
     * @type Object
     */
    formatCodes: {
        d: &quot;Ext.String.leftPad(this.getDate(), 2, '0')&quot;,
        D: &quot;Ext.Date.getShortDayName(this.getDay())&quot;,
        j: &quot;this.getDate()&quot;,
        l: &quot;Ext.Date.dayNames[this.getDay()]&quot;,
        N: &quot;(this.getDay() ? this.getDay() : 7)&quot;,
        S: &quot;Ext.Date.getSuffix(this)&quot;,
        w: &quot;this.getDay()&quot;,
        z: &quot;Ext.Date.getDayOfYear(this)&quot;,
        W: &quot;Ext.String.leftPad(Ext.Date.getWeekOfYear(this), 2, '0')&quot;,
        F: &quot;Ext.Date.monthNames[this.getMonth()]&quot;,
        m: &quot;Ext.String.leftPad(this.getMonth() + 1, 2, '0')&quot;,
        M: &quot;Ext.Date.getShortMonthName(this.getMonth())&quot;,
        n: &quot;(this.getMonth() + 1)&quot;,
        t: &quot;Ext.Date.getDaysInMonth(this)&quot;,
        L: &quot;(Ext.Date.isLeapYear(this) ? 1 : 0)&quot;,
        o: &quot;(this.getFullYear() + (Ext.Date.getWeekOfYear(this) == 1 &amp;&amp; this.getMonth() &gt; 0 ? +1 : (Ext.Date.getWeekOfYear(this) &gt;= 52 &amp;&amp; this.getMonth() &lt; 11 ? -1 : 0)))&quot;,
        Y: &quot;Ext.String.leftPad(this.getFullYear(), 4, '0')&quot;,
        y: &quot;('' + this.getFullYear()).substring(2, 4)&quot;,
        a: &quot;(this.getHours() &lt; 12 ? 'am' : 'pm')&quot;,
        A: &quot;(this.getHours() &lt; 12 ? 'AM' : 'PM')&quot;,
        g: &quot;((this.getHours() % 12) ? this.getHours() % 12 : 12)&quot;,
        G: &quot;this.getHours()&quot;,
        h: &quot;Ext.String.leftPad((this.getHours() % 12) ? this.getHours() % 12 : 12, 2, '0')&quot;,
        H: &quot;Ext.String.leftPad(this.getHours(), 2, '0')&quot;,
        i: &quot;Ext.String.leftPad(this.getMinutes(), 2, '0')&quot;,
        s: &quot;Ext.String.leftPad(this.getSeconds(), 2, '0')&quot;,
        u: &quot;Ext.String.leftPad(this.getMilliseconds(), 3, '0')&quot;,
        O: &quot;Ext.Date.getGMTOffset(this)&quot;,
        P: &quot;Ext.Date.getGMTOffset(this, true)&quot;,
        T: &quot;Ext.Date.getTimezone(this)&quot;,
        Z: &quot;(this.getTimezoneOffset() * -60)&quot;,

        c: function() {
            for(var c = &quot;Y-m-dTH:i:sP&quot;, code = [], i = 0, l = c.length; i &lt; l; ++i) {
                var e = c.charAt(i);
                code.push(e == &quot;T&quot; ? &quot;'T'&quot; : Ext.Date.getFormatCode(e));
            }
            return code.join(&quot; + &quot;);
        },

        U: &quot;Math.round(this.getTime() / 1000)&quot;
    },

    // }}}
    // {{{ formatFunctions

<span id='Ext-Date-property-formatFunctions'>    /**
</span>     * {Ext_Date:property-formatFunctions:desc}
     *
     * @property formatFunctions
     * @type Object
     */
    formatFunctions: {
        &quot;MS&quot;: function() {
            return '\\/Date(' + this.getTime() + ')\\/';
        }
    },

    // }}}
    // {{{ HOUR

<span id='Ext-Date-property-HOUR'>    /**
</span>     * {Ext_Date:property-HOUR:desc}
     *
     * @type String
     */
    HOUR: &quot;h&quot;,

    // }}}
    // {{{ MILLI

<span id='Ext-Date-property-MILLI'>    /**
</span>     * {Ext_Date:property-MILLI:desc}
     *
     * @type String
     */
    MILLI: &quot;ms&quot;,

    // }}}
    // {{{ MINUTE

<span id='Ext-Date-property-MINUTE'>    /**
</span>     * {Ext_Date:property-MINUTE:desc}
     *
     * @type String
     */
    MINUTE: &quot;mi&quot;,

    // }}}
    // {{{ MONTH

<span id='Ext-Date-property-MONTH'>    /**
</span>     * {Ext_Date:property-MONTH:desc}
     *
     * @type String
     */
    MONTH: &quot;mo&quot;,

    // }}}
    // {{{ monthNames

<span id='Ext-Date-property-monthNames'>    /**
</span>     * @property {String[]} monthNames
     *
     * {Ext_Date:property-monthNames:desc}
     */
    monthNames: [
        &quot;January&quot;,
        &quot;February&quot;,
        &quot;March&quot;,
        &quot;April&quot;,
        &quot;May&quot;,
        &quot;June&quot;,
        &quot;July&quot;,
        &quot;August&quot;,
        &quot;September&quot;,
        &quot;October&quot;,
        &quot;November&quot;,
        &quot;December&quot;
    ],

    // }}}
    // {{{ monthNumbers

<span id='Ext-Date-property-monthNumbers'>    /**
</span>     * {Ext_Date:property-monthNumbers:desc}
     */
    monthNumbers: {
        Jan: 0,
        Feb: 1,
        Mar: 2,
        Apr: 3,
        May: 4,
        Jun: 5,
        Jul: 6,
        Aug: 7,
        Sep: 8,
        Oct: 9,
        Nov: 10,
        Dec: 11
    },

    // }}}
    // {{{ parseRegexes

    // private
    parseRegexes: [],

    // }}}
    // {{{ SECOND

<span id='Ext-Date-property-SECOND'>    /**
</span>     * {Ext_Date:property-SECOND:desc}
     *
     * @type String
     */
    SECOND: &quot;s&quot;,

    // }}}
    // {{{ useStrict

<span id='Ext-Date-property-useStrict'>    /**
</span>     * {Ext_Date:property-useStrict:desc}
     *
     * @type Boolean
     */
    useStrict: false,

    // }}}
    // {{{ y2kYear

    // private
    y2kYear: 50,

    // }}}
    // {{{ YEAR

<span id='Ext-Date-property-YEAR'>    /**
</span>     * {Ext_Date:property-YEAR:desc}
     *
     * @type String
     */
    YEAR: &quot;y&quot;,

    // }}}
    // {{{ parseFunctions

<span id='Ext-Date-property-parseFunctions'>    /**
</span>     * {Ext_Date:property-parseFunctions:desc}
     *
     * @type Object
     */
    parseFunctions: {

        &quot;MS&quot;: function(input, strict) {

            var re = new RegExp('\\/Date\\(([-+])?(\\d+)(?:[+-]\\d{4})?\\)\\/');
            var r = (input || '').match(re);

            return r? new Date(((r[1] || '') + r[2]) * 1) : null;
        }

    },

    // }}}
    // {{{ $xf

    // private
    $xf: function(format) {

        var args = Array.prototype.slice.call(arguments, 1);

        return format.replace(/\{(\d+)\}/g, function(m, i) {
            return args[i];
        });
    },

    // }}}
    // {{{ add

<span id='Ext-Date-method-add'>    /**
</span>     * {Ext_Date:method-add:desc}
     *
     * @param {Date} date {Ext_Date:method-add:param_date}
     * @param {String} interval {Ext_Date:method-add:param_interval}
     * @param {Number} value {Ext_Date:method-add:param_value}
     * @return {Date} {Ext_Date:method-add:return}
     */
    add: function(date, interval, value) {

        var d = Ext.Date.clone(date),
            Date = Ext.Date;

        if(!interval || value === 0) {
            return d;
        }

        switch(interval.toLowerCase()) {

            case Ext.Date.MILLI:
                d.setMilliseconds(d.getMilliseconds() + value);
            break;

            case Ext.Date.SECOND:
                d.setSeconds(d.getSeconds() + value);
            break;

            case Ext.Date.MINUTE:
                d.setMinutes(d.getMinutes() + value);
            break;

            case Ext.Date.HOUR:
                d.setHours(d.getHours() + value);
            break;

            case Ext.Date.DAY:
                d.setDate(d.getDate() + value);
            break;

            case Ext.Date.MONTH:
                var day = date.getDate();

                if(day &gt; 28) {
                    day = Math.min(
                        day,
                        Ext.Date.getLastDateOfMonth(
                            Ext.Date.add(
                                Ext.Date.getFirstDateOfMonth(date),
                                'mo',
                                value
                            )
                        ).getDate()
                    );
                }

                d.setDate(day);
                d.setMonth(date.getMonth() + value);
                break;

            case Ext.Date.YEAR:
                d.setFullYear(date.getFullYear() + value);
            break;
        }

        return d;
    },

    // }}}
    // {{{ between

<span id='Ext-Date-method-between'>    /**
</span>     * {Ext_Date:method-between:desc}
     *
     * @param {Date} date {Ext_Date:method-between:param_date}
     * @param {Date} start {Ext_Date:method-between:param_start}
     * @param {Date} end {Ext_Date:method-between:param_end}
     * @return {Boolean} {Ext_Date:method-between:return}
     */
    between: function(date, start, end) {

        var t = date.getTime();

        return start.getTime() &lt;= t &amp;&amp; t &lt;= end.getTime();
    },

    // }}}
    // {{{ clearTime

<span id='Ext-Date-method-clearTime'>    /**
</span>     * {Ext_Date:method-clearTime:desc}
     *
     * @param {Date} date {Ext_Date:method-clearTime:param_date}
     * @param {Boolean} clone {Ext_Date:method-clearTime:param_clone}
     * @return {Date} {Ext_Date:method-clearTime:retrun}
     */
    clearTime: function(date, clone) {

        if(clone) {
            return Ext.Date.clearTime(Ext.Date.clone(date));
        }

        var d = date.getDate();

        date.setHours(0);
        date.setMinutes(0);
        date.setSeconds(0);
        date.setMilliseconds(0);

        //#JSCOVERAGE_IF 1
        /*
         if(date.getDate() != d) {

             for (var hr = 1, c = Ext.Date.add(date, Ext.Date.HOUR, hr); c.getDate() != d; hr++, c = Ext.Date.add(date, Ext.Date.HOUR, hr));

             date.setDate(d);
             date.setHours(c.getHours());

         }
        */
        //#JSCOVERAGE_ENDIF

        return date;
    },

    // }}}
    // {{{ clone

<span id='Ext-Date-method-clone'>    /**
</span>     * {Ext_Date:method-clone:desc}
     *
     * @param {Date} date {Ext_Date:method-clone:param_date}
     * @return {Date} {Ext_Date:method-clone:return}
     */
    clone: function(date) {
        return new Date(date.getTime());
    },

    // }}}
    // {{{ createFormat

    // private
    createFormat: function(format) {

        var code = [],
            special = false,
            ch = '';

        for(var i = 0; i &lt; format.length; ++i) {

            ch = format.charAt(i);

            if(!special &amp;&amp; ch == &quot;\\&quot;) {

                special = true;

            } else if(special) {

                special = false;
                code.push(&quot;'&quot; + Ext.String.escape(ch) + &quot;'&quot;);

            } else {

                code.push(Ext.Date.getFormatCode(ch));
            }
        }

        Ext.Date.formatFunctions[format] = Ext.functionFactory(&quot;return &quot; + code.join('+'));

    },

    // }}}
    // {{{ createParser

    // private
    createParser: (function() {

        var code = [
            &quot;var dt, y, m, d, h, i, s, ms, o, z, zz, u, v,&quot;,
            &quot;def = Ext.Date.defaults,&quot;,
            &quot;results = String(input).match(Ext.Date.parseRegexes[{0}]);&quot;,

            &quot;if(results){&quot;,

                &quot;{1}&quot;,

                &quot;if(u != null){&quot;,
                    &quot;v = new Date(u * 1000);&quot;,
                &quot;}else{&quot;,

                    &quot;dt = Ext.Date.clearTime(new Date);&quot;,
                    &quot;y = Ext.Number.from(y, Ext.Number.from(def.y, dt.getFullYear()));&quot;,
                    &quot;m = Ext.Number.from(m, Ext.Number.from(def.m - 1, dt.getMonth()));&quot;,
                    &quot;d = Ext.Number.from(d, Ext.Number.from(def.d, dt.getDate()));&quot;,
                    &quot;h  = Ext.Number.from(h, Ext.Number.from(def.h, dt.getHours()));&quot;,
                    &quot;i  = Ext.Number.from(i, Ext.Number.from(def.i, dt.getMinutes()));&quot;,
                    &quot;s  = Ext.Number.from(s, Ext.Number.from(def.s, dt.getSeconds()));&quot;,
                    &quot;ms = Ext.Number.from(ms, Ext.Number.from(def.ms, dt.getMilliseconds()));&quot;,

                &quot;if(z &gt;= 0 &amp;&amp; y &gt;= 0) {&quot;,

                    &quot;v = Ext.Date.add(new Date(y &lt; 100 ? 100 : y, 0, 1, h, i, s, ms), Ext.Date.YEAR, y &lt; 100 ? y - 100 : 0);&quot;,
                    &quot;v = !strict? v : (strict === true &amp;&amp; (z &lt;= 364 || (Ext.Date.isLeapYear(v) &amp;&amp; z &lt;= 365))? Ext.Date.add(v, Ext.Date.DAY, z) : null);&quot;,

                &quot;} else if(strict === true &amp;&amp; !Ext.Date.isValid(y, m + 1, d, h, i, s, ms)){&quot;,

                    &quot;v = null;&quot;,

                &quot;} else {&quot;,

                    &quot;v = Ext.Date.add(new Date(y &lt; 100 ? 100 : y, m, d, h, i, s, ms), Ext.Date.YEAR, y &lt; 100 ? y - 100 : 0);&quot;,

                &quot;}&quot;,
            &quot;}&quot;,
        &quot;}&quot;,

        &quot;if(v){&quot;,
            &quot;if(zz != null){&quot;,

                &quot;v = Ext.Date.add(v, Ext.Date.SECOND, -v.getTimezoneOffset() * 60 - zz);&quot;,

            &quot;} else if(o) {&quot;,

                &quot;v = Ext.Date.add(v, Ext.Date.MINUTE, -v.getTimezoneOffset() + (sn == '+'? -1 : 1) * (hr * 60 + mn));&quot;,

            &quot;}&quot;,
        &quot;}&quot;,

        &quot;return v;&quot;

        ].join('\n');

        return function(format) {

            var me = this;
            var regexNum = Ext.Date.parseRegexes.length,
                currentGroup = 1,
                calc = [],
                regex = [],
                special = false,
                ch = &quot;&quot;;

            for(var i = 0; i &lt; format.length; ++i) {

                ch = format.charAt(i);

                if(!special &amp;&amp; ch == &quot;\\&quot;) {

                    special = true;

                } else if(special) {

                    special = false;
                    regex.push(Ext.String.escape(ch));

                } else {

                    var obj = Ext.Date.formatCodeToRegex(ch, currentGroup);

                    currentGroup += obj.g;

                    regex.push(obj.s);

                    if(obj.g &amp;&amp; obj.c) {

                        calc.push(obj.c);

                    }
                }
            }

            Ext.Date.parseRegexes[regexNum] = new RegExp(&quot;^&quot; + regex.join('') + &quot;$&quot;, 'i');
            Ext.Date.parseFunctions[format] = Ext.functionFactory(&quot;input&quot;, &quot;strict&quot;, me.$xf(code, regexNum, calc.join('')));
        };

    })(),

    // }}}
    // {{{ dateFormat

    // private
    dateFormat: function(date, format) {
        return Ext.Date.format(date, format);
    },

    // }}}
    // {{{ format

<span id='Ext-Date-method-format'>    /**
</span>     * {Ext_Date:method-format:desc}
     *
     * @param {Date} date {Ext_Date:method-format:param_date}
     * @param {String} format {Ext_Date:method-format:param_format}
     * @return {String} {Ext_Date:method-format:return}
     */
    format: function(date, format) {

        if(Ext.Date.formatFunctions[format] == null) {
            Ext.Date.createFormat(format);
        }

        return Ext.Date.formatFunctions[format].call(date) + '';
    },

    // }}}
    // {{{ formatCodeToRegex

    // private
    formatCodeToRegex: function(character, currentGroup) {

        var me = this;
        var p = Ext.Date.parseCodes[character];

        if(p) {
            p = typeof p == 'function'? p() : p;
            Ext.Date.parseCodes[character] = p;
        }

        return p ? Ext.applyIf({
            c: p.c ? me.$xf(p.c, currentGroup || &quot;{0}&quot;) : p.c
        }, p) : {
            g: 0,
            c: null,
            s: Ext.String.escapeRegex(character)
        };
    },

    // }}}
    // {{{ formatContainsDateInfo

<span id='Ext-Date-method-formatContainsDateInfo'>    /**
</span>     * {Ext_Date:method-formatContainsDateInfo:desc}
     *
     * @param {String} format {Ext_Date:method-formatContainsDateInfo:param_format}
     * @return {Boolean} {Ext_Date:method-formatContainsDateInfo:return}
     */
    formatContainsDateInfo: (function(){

        var stripEscapeRe = /(\\.)/g, dateInfoRe = /([djzmnYycU]|MS)/;

        return function(format) {
            return dateInfoRe.test(format.replace(stripEscapeRe, ''));
        };

    })(),

    // }}}
    // {{{ formatContainsHourInfo

<span id='Ext-Date-method-formatContainsHourInfo'>    /**
</span>     * {Ext_Date:method-formatContainsHourInfo:desc}
     *
     * @param {String} format {Ext_Date:method-formatContainsHourInfo:param_format}
     * @return {Boolean} {Ext_Date:method-formatContainsHourInfo:return}
     */
    formatContainsHourInfo: (function(){

        var stripEscapeRe = /(\\.)/g, hourInfoRe = /([gGhHisucUOPZ]|MS)/;

        return function(format) {
            return hourInfoRe.test(format.replace(stripEscapeRe, ''));
        };

    })(),

    // }}}
    // {{{ getDayOfYear

<span id='Ext-Date-method-getDayOfYear'>    /**
</span>     * {Ext_Date:method-getDayOfYear:desc}
     *
     * @param {Date} date {Ext_Date:method-getDayOfYear:param_date}
     * @return {Number} {Ext_Date:method-getDayOfYear:return}
     */
    getDayOfYear: function(date) {

        var num = 0,
            d = Ext.Date.clone(date),
            m = date.getMonth(),
            i;

        for(i = 0, d.setDate(1), d.setMonth(0); i &lt; m; d.setMonth(++i)) {
            num += Ext.Date.getDaysInMonth(d);
        }

        return num + date.getDate() - 1;
    },

    // }}}
    // {{{ getDaysInMonth

<span id='Ext-Date-method-getDaysInMonth'>    /**
</span>     * {Ext_Date:method-getDaysInMonth:desc}
     *
     * @param {Date} date {Ext_Date:method-getDaysInMonth:param_date}
     * @return {Number} {Ext_Date:method-getDaysInMonth:return}
     */
    getDaysInMonth: (function() {

        var daysInMonth = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];

        return function(date) {
            var m = date.getMonth();

            return m == 1 &amp;&amp; Ext.Date.isLeapYear(date) ? 29 : daysInMonth[m];
        };
    })(),

    // }}}
    // {{{ getElapsed

<span id='Ext-Date-method-getElapsed'>    /**
</span>     * {Ext_Date:method-getElapsed:desc}
     *
     * @param {Date} dateA {Ext_Date:method-getElapsed:param_dateA}
     * @param {Date} dateB {Ext_Date:method-getElapsed:param_dateB}
     * @return {Number} {Ext_Date:method-getElapsed:return}
     */
    getElapsed: function(dateA, dateB) {
        return Math.abs(dateA - (dateB || new Date()));
    },

    // }}}
    // {{{ getFirstDateOfMonth

<span id='Ext-Date-method-getFirstDateOfMonth'>    /**
</span>     * {Ext_Date:method-getFirstDateOfMonth:desc}
     *
     * @param {Date} date {Ext_Date:method-getFirstDateOfMonth:param_date}
     * @return {Date} {Ext_Date:method-getFirstDateOfMonth:return}
     */
    getFirstDateOfMonth: function(date) {
        return new Date(date.getFullYear(), date.getMonth(), 1);
    },

    // }}}
    // {{{ getFirstDayOfMonth

<span id='Ext-Date-method-getFirstDayOfMonth'>    /**
</span>     * {Ext_Date:method-getFirstDayOfMonth:desc}
     *
     * @param {Date} date {Ext_Date:method-getFirstDayOfMonth:param_date}
     * @return {Number} {Ext_Date:method-getFirstDayOfMonth:return}
     */
    getFirstDayOfMonth: function(date) {

        var day = (date.getDay() - (date.getDate() - 1)) % 7;

        return (day &lt; 0) ? (day + 7) : day;
    },

    // }}}
    // {{{ getFormatCode

    // private
    getFormatCode:function(character) {

        var f = Ext.Date.formatCodes[character];

        if(f) {
            f = typeof f == 'function'? f() : f;
            Ext.Date.formatCodes[character] = f;
        }

        return f || (&quot;'&quot; + Ext.String.escape(character) + &quot;'&quot;);
    },

    // }}}
    // {{{ getGMTOffset

<span id='Ext-Date-method-getGMTOffset'>    /**
</span>     * {Ext_Date:method-getGMTOffset:desc}
     *
     * @param {Date} date {Ext_Date:method-getGMTOffset:param_date}
     * @param {Boolean} colon {Ext_Date:method-getGMTOffset:param_colon}
     * @return {String} {Ext_Date:method-getGMTOffset:return}
     */
    getGMTOffset: function(date, colon) {

        var offset = date.getTimezoneOffset();

        return (offset &gt; 0 ? &quot;-&quot; : &quot;+&quot;)
                + Ext.String.leftPad(Math.floor(Math.abs(offset) / 60), 2, &quot;0&quot;)
                + (colon ? &quot;:&quot; : &quot;&quot;)
                + Ext.String.leftPad(Math.abs(offset % 60), 2, &quot;0&quot;);
    },

    // }}}
    // {{{ getLastDateOfMonth

<span id='Ext-Date-method-getLastDateOfMonth'>    /**
</span>     * {Ext_Date:method-getLastDateOfMonth:desc}
     *
     * @param {Date} date {Ext_Date:method-getLastDateOfMonth:param_date}
     * @return {Date} {Ext_Date:method-getLastDateOfMonth:return}
     */
    getLastDateOfMonth: function(date) {
        return new Date(date.getFullYear(), date.getMonth(), Ext.Date.getDaysInMonth(date));
    },

    // }}}
    // {{{ getLastDayOfMonth

<span id='Ext-Date-method-getLastDayOfMonth'>    /**
</span>     * {Ext_Date:method-getLastDayOfMonth:desc}
     *
     * @param {Date} date {Ext_Date:method-getLastDayOfMonth:param_date}
     * @return {Number} {Ext_Date:method-getLastDayOfMonth:return}
     */
    getLastDayOfMonth: function(date) {
        return Ext.Date.getLastDateOfMonth(date).getDay();
    },

    // }}}
    // {{{ getMonthNumber

<span id='Ext-Date-method-getMonthNumber'>    /**
</span>     * {Ext_Date:method-getMonthNumber:desc}
     *
     * @param {String} name {Ext_Date:method-getMonthNumber:param_name}
     * @return {Number} {Ext_Date:method-getMonthNumber:return}
     */
    getMonthNumber: function(name) {
        return Ext.Date.monthNumbers[name.substring(0, 1).toUpperCase() + name.substring(1, 3).toLowerCase()];
    },

    // }}}
    // {{{ getShortDayName

<span id='Ext-Date-method-getShortDayName'>    /**
</span>     * {Ext_Date:method-getShortDayName:desc}
     *
     * @param {Number} day {Ext_Date:method-getShortDayName:param_day}
     * @return {String} {Ext_Date:method-getShortDayName:return}
     */
    getShortDayName: function(day) {
        return Ext.Date.dayNames[day].substring(0, 3);
    },

    // }}}
    // {{{ getShortMonthName

<span id='Ext-Date-method-getShortMonthName'>    /**
</span>     * {Ext_Date:method-getShortMonthName:desc}
     *
     * @param {Number} month {Ext_Date:method-getShortMonthName:param_month}
     * @return {String} {Ext_Date:method-getShortMonthName:return}
     */
    getShortMonthName: function(month) {
        return Ext.Date.monthNames[month].substring(0, 3);
    },

    // }}}
    // {{{ getSuffix

<span id='Ext-Date-method-getSuffix'>    /**
</span>     * {Ext_Date:method-getSuffix:desc}
     *
     * @param {Date} date {Ext_Date:method-getSuffix:param_date}
     * @return {String} {Ext_Date:method-getSuffix:return}
     */
    getSuffix: function(date) {

        switch(date.getDate()) {
            case 1:
            case 21:
            case 31:
                return &quot;st&quot;;
            case 2:
            case 22:
                return &quot;nd&quot;;
            case 3:
            case 23:
                return &quot;rd&quot;;
            default:
                return &quot;th&quot;;
        }

    },

    // }}}
    // {{{ getTimezone

<span id='Ext-Date-method-getTimezone'>    /**
</span>     * {Ext_Date:method-getTimezone:desc}
     *
     * @param {Date} date {Ext_Date:method-getTimezone:param_date}
     * @return {String} {Ext_Date:method-getTimezone:return}
     */
    getTimezone: function(date) {
        return date.toString().replace(/^.* (?:\((.*)\)|([A-Z]{1,4})(?:[\-+][0-9]{4})?(?: -?\d+)?)$/, &quot;$1$2&quot;).replace(/[^A-Z]/g, &quot;&quot;);
    },

    // }}}
    // {{{ getWeekOfYear

<span id='Ext-Date-method-getWeekOfYear'>    /**
</span>     * {Ext_Date:method-getWeekOfYear:desc}
     *
     * @param {Date} date {Ext_Date:method-getWeekOfYear:param_date}
     * @return {Number} {Ext_Date:method-getWeekOfYear:return}
     */
    getWeekOfYear: (function() {

        var ms1d = 864e5, ms7d = 7 * ms1d;



        return function(date) {

//#JSCOVERAGE_IF 0

            var DC3 = Date.UTC(date.getFullYear(), date.getMonth(), date.getDate() + 3) / ms1d,
                AWN = Math.floor(DC3 / 7), // an Absolute Week Number
                Wyr = new Date(AWN * ms7d).getUTCFullYear();

            return AWN - Math.floor(Date.UTC(Wyr, 0, 7) / ms7d) + 1;

//#JSCOVERAGE_ENDIF

        };
    })(),

    // }}}
    // {{{ isDST

<span id='Ext-Date-method-isDST'>    /**
</span>     * {Ext_Date:method-isDST:desc}
     *
     * @param {Date} date {Ext_Date:method-isDST:param_date}
     * @return {Boolean} {Ext_Date:method-isDST:return}
     */
    isDST: function(date) {

//#JSCOVERAGE_IF 0

        return new Date(date.getFullYear(), 0, 1).getTimezoneOffset() != date.getTimezoneOffset();

//#JSCOVERAGE_ENDIF

    },

    // }}}
    // {{{ isLeapYear

<span id='Ext-Date-method-isLeapYear'>    /**
</span>     * {Ext_Date:method-isLeapYear:desc}
     *
     * @param {Date} date {Ext_Date:method-isLeapYear:param_date}
     * @return {Boolean} {Ext_Date:method-isLeapYear:return}
     */
    isLeapYear: function(date) {

        var year = date.getFullYear();

        return !!((year &amp; 3) == 0 &amp;&amp; (year % 100 || (year % 400 == 0 &amp;&amp; year)));
    },

    // }}}
    // {{{ isValid

<span id='Ext-Date-method-isValid'>    /**
</span>     * {Ext_Date:method-isValid:desc}
     *
     * @param {Number} year {Ext_Date:method-isValid:param_year}
     * @param {Number} month {Ext_Date:method-isValid:param_month}
     * @param {Number} day {Ext_Date:method-isValid:param_day}
     * @param {Number} hour {Ext_Date:method-isValid:param_hour}
     * @param {Number} minute {Ext_Date:method-isValid:param_minute}
     * @param {Number} second {Ext_Date:method-isValid:param_second}
     * @param {Number} millisecond {Ext_Date:method-isValid:param_millisecond}
     * @return {Boolean} {Ext_Date:method-isValid:return}
     */
    isValid: function(y, m, d, h, i, s, ms) {

        h = h || 0;
        i = i || 0;
        s = s || 0;
        ms = ms || 0;

        var dt = Ext.Date.add(new Date(y &lt; 100 ? 100 : y, m - 1, d, h, i, s, ms), Ext.Date.YEAR, y &lt; 100 ? y - 100 : 0);

        return y == dt.getFullYear() &amp;&amp;
                m == dt.getMonth() + 1 &amp;&amp;
                d == dt.getDate() &amp;&amp;
                h == dt.getHours() &amp;&amp;
                i == dt.getMinutes() &amp;&amp;
                s == dt.getSeconds() &amp;&amp;
                ms == dt.getMilliseconds();
    },

    // }}}
    // {{{ now

<span id='Ext-Date-method-now'>    /**
</span>     * {Ext_Date:method-now:desc}
     *
     * @return {Date} {Ext_Date:method-now:return}
     */
    now: Date.now || function() {

//#JSCOVERAGE_IF false

        return +new Date();

//#JSCOVERAGE_ENDIF

    },

    // }}}
    // {{{ parse

<span id='Ext-Date-method-parse'>    /**
</span>     * {Ext_Date:method-parse:desc}
     *
     * @param {String} input {Ext_Date:method-parse:input}
     * @param {String} format {Ext_Date:method-parse:format}
     * @param {Boolean} strict {Ext_Date:method-parse:strict}
     * @return {Date} {Ext_Date:method-parse:return}
     */
    parse: function(input, format, strict) {

        var p = Ext.Date.parseFunctions;

        if(p[format] == null) {
            Ext.Date.createParser(format);
        }

        return p[format](input, Ext.isDefined(strict) ? strict : Ext.Date.useStrict);
    },

    // }}}
    // {{{ parseCodes

    // private
    parseCodes: {

        d: {
            g: 1,
            c: &quot;d = parseInt(results[{0}], 10);\n&quot;,
            s: &quot;(\\d{2})&quot;
        },

        j: {
            g:1,
            c:&quot;d = parseInt(results[{0}], 10);\n&quot;,
            s:&quot;(\\d{1,2})&quot;
        },

        D: function() {

            for(var a = [], i = 0; i &lt; 7; a.push(Ext.Date.getShortDayName(i)), ++i);

            return {
                g: 0,
                c: null,
                s: &quot;(?:&quot; + a.join(&quot;|&quot;) +&quot;)&quot;
            };
        },

        l: function() {

            return {
                g: 0,
                c: null,
                s: &quot;(?:&quot; + Ext.Date.dayNames.join(&quot;|&quot;) + &quot;)&quot;
            };
        },

        N: {
            g: 0,
            c: null,
            s: &quot;[1-7]&quot;
        },

        S: {
            g: 0,
            c: null,
            s: &quot;(?:st|nd|rd|th)&quot;
        },

        w: {
            g: 0,
            c: null,
            s: &quot;[0-6]&quot;
        },

        z: {
            g: 1,
            c: &quot;z = parseInt(results[{0}], 10);\n&quot;,
            s: &quot;(\\d{1,3})&quot;
        },

        W: {
            g: 0,
            c: null,
            s: &quot;(?:\\d{2})&quot;
        },

        F: function() {

            return {
                g: 1,
                c: &quot;m = parseInt(Ext.Date.getMonthNumber(results[{0}]), 10);\n&quot;,
                s: &quot;(&quot; + Ext.Date.monthNames.join(&quot;|&quot;) + &quot;)&quot;
            };

        },

        M: function() {

            for(var a = [], i = 0; i &lt; 12; a.push(Ext.Date.getShortMonthName(i)), ++i);

            return Ext.applyIf({
                s:&quot;(&quot; + a.join(&quot;|&quot;) + &quot;)&quot;
            }, Ext.Date.formatCodeToRegex(&quot;F&quot;));
        },

        m: {
            g: 1,
            c: &quot;m = parseInt(results[{0}], 10) - 1;\n&quot;,
            s: &quot;(\\d{2})&quot;
        },

        n: {
            g: 1,
            c: &quot;m = parseInt(results[{0}], 10) - 1;\n&quot;,
            s: &quot;(\\d{1,2})&quot;
        },

        t: {
            g: 0,
            c: null,
            s: &quot;(?:\\d{2})&quot;
        },

        L: {
            g: 0,
            c: null,
            s: &quot;(?:1|0)&quot;
        },

        o: function() {
            return Ext.Date.formatCodeToRegex(&quot;Y&quot;);
        },

        Y: {
            g: 1,
            c: &quot;y = parseInt(results[{0}], 10);\n&quot;,
            s: &quot;(\\d{4})&quot;
        },

        y: {
            g: 1,
            c: &quot;var ty = parseInt(results[{0}], 10);\n&quot;
            + &quot;y = ty &gt; Ext.Date.y2kYear ? 1900 + ty : 2000 + ty;\n&quot;,
            s: &quot;(\\d{1,2})&quot;
        },

        a: {
            g: 1,
            c: &quot;if(/(am)/i.test(results[{0}])) {\n&quot;
            + &quot;if(!h || h == 12) { h = 0; }\n&quot;
            + &quot;} else { if(!h || h &lt; 12) { h = (h || 0) + 12; }}&quot;,
            s: &quot;(am|pm|AM|PM)&quot;
        },

        A: {
            g: 1,
            c: &quot;if(/(am)/i.test(results[{0}])) {\n&quot;
            + &quot;if(!h || h == 12) { h = 0; }\n&quot;
            + &quot;} else { if(!h || h &lt; 12) { h = (h || 0) + 12; }}&quot;,
            s: &quot;(AM|PM|am|pm)&quot;
        },

        g: function() {
            return Ext.Date.formatCodeToRegex(&quot;G&quot;);
        },

        G: {
            g: 1,
            c: &quot;h = parseInt(results[{0}], 10);\n&quot;,
            s: &quot;(\\d{1,2})&quot;
        },

        h: function() {
            return Ext.Date.formatCodeToRegex(&quot;H&quot;);
        },

        H: {
            g: 1,
            c: &quot;h = parseInt(results[{0}], 10);\n&quot;,
            s: &quot;(\\d{2})&quot;
        },

        i: {
            g: 1,
            c: &quot;i = parseInt(results[{0}], 10);\n&quot;,
            s: &quot;(\\d{2})&quot;
        },

        s: {
            g: 1,
            c: &quot;s = parseInt(results[{0}], 10);\n&quot;,
            s: &quot;(\\d{2})&quot;
        },

        u: {
            g: 1,
            c: &quot;ms = results[{0}]; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n&quot;,
            s: &quot;(\\d+)&quot;
        },

        O: {
            g: 1,
            c: [
                &quot;o = results[{0}];&quot;,
                &quot;var sn = o.substring(0,1),&quot;,
                &quot;hr = o.substring(1,3)*1 + Math.floor(o.substring(3,5) / 60),&quot;,
                &quot;mn = o.substring(3,5) % 60;&quot;,
                &quot;o = ((-12 &lt;= (hr*60 + mn)/60) &amp;&amp; ((hr*60 + mn)/60 &lt;= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n&quot; // -12hrs &lt;= GMT offset &lt;= 14hrs
            ].join(&quot;\n&quot;),
            s: &quot;([+\-]\\d{4})&quot;
        },
        P: {
            g: 1,
            c: [
                &quot;o = results[{0}];&quot;,
                &quot;var sn = o.substring(0,1),&quot;,
                &quot;hr = o.substring(1,3)*1 + Math.floor(o.substring(4,6) / 60),&quot;,
                &quot;mn = o.substring(4,6) % 60;&quot;,
                &quot;o = ((-12 &lt;= (hr*60 + mn)/60) &amp;&amp; ((hr*60 + mn)/60 &lt;= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n&quot; // -12hrs &lt;= GMT offset &lt;= 14hrs
            ].join(&quot;\n&quot;),
            s: &quot;([+\-]\\d{2}:\\d{2})&quot;
        },
        T: {
            g: 0,
            c: null,
            s: &quot;[A-Z]{1,4}&quot;
        },
        Z: {
            g: 1,
            c: &quot;zz = results[{0}] * 1;\n&quot;
                + &quot;zz = (-43200 &lt;= zz &amp;&amp; zz &lt;= 50400)? zz : null;\n&quot;,
            s: &quot;([+\-]?\\d{1,5})&quot;
        },
        c: function() {

            var calc = [],
                arr = [
                    Ext.Date.formatCodeToRegex(&quot;Y&quot;, 1),
                    Ext.Date.formatCodeToRegex(&quot;m&quot;, 2),
                    Ext.Date.formatCodeToRegex(&quot;d&quot;, 3),
                    Ext.Date.formatCodeToRegex(&quot;h&quot;, 4),
                    Ext.Date.formatCodeToRegex(&quot;i&quot;, 5),
                    Ext.Date.formatCodeToRegex(&quot;s&quot;, 6),
                    {c:&quot;ms = results[7] || '0'; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n&quot;},
                    {
                        c:[
                            &quot;if(results[8]) {&quot;,
                            &quot;if(results[8] == 'Z'){&quot;,
                            &quot;zz = 0;&quot;,
                            &quot;} else if(results[8].indexOf(':') &gt; -1){&quot;,
                            Ext.Date.formatCodeToRegex(&quot;P&quot;, 8).c,
                            &quot;} else {&quot;,
                            Ext.Date.formatCodeToRegex(&quot;O&quot;, 8).c,
                            &quot;}&quot;,
                            &quot;}&quot;
                            ].join('\n')
                    }
                ];

            for(var i = 0, l = arr.length; i &lt; l; ++i) {
                calc.push(arr[i].c);
            }

            return {
                g: 1,
                c: calc.join(&quot;&quot;),
                s:[
                    arr[0].s,
                    &quot;(?:&quot;, &quot;-&quot;, arr[1].s,
                    &quot;(?:&quot;, &quot;-&quot;, arr[2].s,
                    &quot;(?:&quot;,
                    &quot;(?:T| )?&quot;,
                    arr[3].s, &quot;:&quot;, arr[4].s,
                    &quot;(?::&quot;, arr[5].s, &quot;)?&quot;,
                    &quot;(?:(?:\\.|,)(\\d+))?&quot;,
                    &quot;(Z|(?:[-+]\\d{2}(?::)?\\d{2}))?&quot;,
                    &quot;)?&quot;,
                    &quot;)?&quot;,
                    &quot;)?&quot;
                ].join(&quot;&quot;)
            };
        },
        U: {
            g: 1,
            c: &quot;u = parseInt(results[{0}], 10);\n&quot;,
            s: &quot;(-?\\d+)&quot;
        }
    },

    // }}}
    // {{{ toString

    // private
    toString: function(date) {

        var pad = Ext.String.leftPad;

        return date.getFullYear() + &quot;-&quot;
               + pad(date.getMonth() + 1, 2, '0') + &quot;-&quot;
               + pad(date.getDate(), 2, '0') + &quot;T&quot;
               + pad(date.getHours(), 2, '0') + &quot;:&quot;
               + pad(date.getMinutes(), 2, '0') + &quot;:&quot;
               + pad(date.getSeconds(), 2, '0');
    }

    // }}}

};

// }}}

/*
 * Local variables:
 * tab-width: 4
 * c-basic-offset: 4
 * c-hanging-comment-ender-p: nil
 * End:
 */
</pre>
</body>
</html>
